C51 COMPILER V9.55   MAIN                                                                  05/05/2020 21:03:30 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: d:\Keil_v5_all\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2          * Author: Later
   3          * Time: 2020/5/1 18:54
   4          * Info: 
   5          * Change:
   6          **/
   7          #include "reg52.h"
   8          #include "Usart1.h"
   9          #include "DHT11.h"
  10          #include "lcd.h"
  11          #include "ADC0809.h"
  12          #include "delay.h"
  13          
  14          #include <intrins.h>
  15          //---重定义关键词---//
  16          #ifndef uchar
              #define uchar unsigned char
              #endif
  19          
  20          #ifndef uint 
              #define uint unsigned int
              #endif
  23          
  24          uchar bluetooth[11];
  25          uchar code CDIS1[14]={"BlueTooth Data"};
  26          
  27          void main()
  28          {  
  29   1              /*初始化设备*/
  30   1              InitUART1();
  31   1              LcdInit();      
  32   1              startT0();
  33   1              while(1)
  34   1              {  
  35   2                      uchar i=0;
  36   2                      /*读取DHT11温湿度数据*/
  37   2                      DHT11_delay_ms(1500);    //DHT11上电后要等待1S以越过不稳定状态在此期间不能发送任何指令
  38   2                      DHT11_receive();  
  39   2      //              send_string(rec_dat);    //RH:湿度, CU:温度
  40   2      //              send_string("\r\n");
  41   2      
  42   2                      /*读取ADC0809读取光强数值*/
  43   2                      delayms(10);            //80MS
  44   2                      Read_Light();   
  45   2      //              send_string(light);     
  46   2      //              send_string("\r\n");
  47   2                      
  48   2                      /*LCD1602显示传感器数组*/
  49   2                      LcdWriteCom(0x01);  //清屏
  50   2                      LcdWriteCom(0x80);
  51   2                      for(i=0;i<14;i++)
  52   2                      {
  53   3                              LcdWriteData(CDIS1[i]); 
  54   3                      }
C51 COMPILER V9.55   MAIN                                                                  05/05/2020 21:03:30 PAGE 2   

  55   2                      LcdWriteCom(0x80+0x40);
  56   2                      for(i=0;i<9;i++)
  57   2                      {
  58   3                              LcdWriteData(rec_dat[i]);               
  59   3                      }
  60   2                      for(i=0;i<3;i++)
  61   2                      {
  62   3                              LcdWriteData(light[i]); 
  63   3                      }
  64   2                      
  65   2                      bluetooth[0]='#';
  66   2                      bluetooth[1]=rec_dat[0];
  67   2                      bluetooth[2]=rec_dat[1];
  68   2                      bluetooth[3]=' ';
  69   2                      bluetooth[4]=rec_dat[6];
  70   2                      bluetooth[5]=rec_dat[7];
  71   2                      bluetooth[6]=' ';
  72   2                      bluetooth[7]=light[0];
  73   2                      bluetooth[8]=light[1];
  74   2                      bluetooth[9]=light[2];
  75   2                      bluetooth[10]='#';
  76   2                      
  77   2                      /*串口蓝牙发送数据*/
  78   2                      send_string(bluetooth);
  79   2                      send_string("\r\n");
  80   2              
  81   2              }
  82   1      }
  83          
  84          /*
  85          ************************************************************
  86          *       函数名称：      t0
  87          *
  88          *       函数功能：      t0中断回调
  89          *
  90          *       入口参数：      
  91          *
  92          *       返回参数：      
  93          *
  94          *       说明：          ADC时钟 
  95          ************************************************************
  96          */  
  97          void t0(void) interrupt 1 using 0 
  98          {  
  99   1         CLK=~CLK; 
 100   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    170    ----
   CONSTANT SIZE    =     17    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
