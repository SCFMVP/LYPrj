C51 COMPILER V9.55   MAIN                                                                  05/02/2020 00:22:13 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: d:\Keil_v5_all\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2          * Author: Later
   3          * Time: 2020/5/1 18:54
   4          * Info: 
   5          * Change:
   6          **/
   7          #include "reg52.h"
   8          #include "Usart1.h"
   9          #include "DHT11.h"
  10          #include "lcd.h"
  11          #include "ADC0809.h"
  12          
  13          #include <intrins.h>
  14          //---重定义关键词---//
  15          #ifndef uchar
              #define uchar unsigned char
              #endif
  18          
  19          #ifndef uint 
              #define uint unsigned int
              #endif
  22          int Read_Light()
  23          {
  24   1              uchar b,c;
  25   1              uint lum_mean,lum_all;          //ad0809读出值
  26   1      
  27   1              for( b=0;b<49;b++)                      //将空数组tt[51]内数值整体左移一位
  28   1              {
  29   2                      tt[b]=tt[b+1];                  //将后一数值放到前一位置
  30   2              }
  31   1              tt[49]=ADC0809();                       //将读出的ad0809数值放入tt[49]
  32   1              for( c=0;c<50;c++)                      //将tt[]内数值相加
  33   1              {
  34   2                      lum_all=lum_all+tt[c];
  35   2              }
  36   1              return lum_mean=lum_all/50;             //将总数/50取出平均值
  37   1      }
  38          void main()
  39          {  
  40   1              /*初始化设备*/
  41   1              InitUART1();
  42   1              LcdInit();      
  43   1              while(1)
  44   1              {  
  45   2                      /*读取DHT11温湿度数据*/
  46   2                      DHT11_delay_ms(1500);    //DHT11上电后要等待1S以越过不稳定状态在此期间不能发送任何指令
  47   2                      DHT11_receive();        
  48   2      
  49   2              /*读取ADC0809读取光强数值*/
  50   2              //              Read_Light();    
  51   2              /*串口蓝牙发送数据*/
  52   2              //         send_string("Later");           
  53   2              //         send_string(rec_dat);    //RH:湿度, CU:温度
  54   2              //         send_string("\r\n");                 
C51 COMPILER V9.55   MAIN                                                                  05/02/2020 00:22:13 PAGE 2   

  55   2              /*LCD1602显示传感器数组*/
  56   2                      
  57   2                      
  58   2              }
  59   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     99    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     51    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
